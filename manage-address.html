<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ISI â€“ Manage Address</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="css/style.css">

<style>
/* SIDE MENU */
.side-menu{
  position:fixed;
  top:0; left:-260px;
  width:260px; height:100%;
  background:#fff;
  box-shadow:4px 0 15px rgba(0,0,0,.2);
  z-index:5000;
  transition:.3s;
  padding:14px;
}
.side-menu.active{ left:0 }
.side-menu a{
  display:block;
  padding:12px 6px;
  font-weight:600;
  color:#2563eb;
  text-decoration:none;
}
.side-menu hr{ border:none;border-top:1px solid #eee;margin:10px 0 }
.menu-header{
  display:flex;
  justify-content:space-between;
  margin-bottom:10px;
}

/* ADDRESS LIST */
.address-card{
  background:#fff;
  border-radius:16px;
  padding:14px;
  margin-bottom:12px;
  box-shadow:0 6px 14px rgba(0,0,0,.08);
  position:relative;
}
.primary-btn{
  position:absolute;
  top:12px;
  right:12px;
  width:26px;
  height:26px;
  border-radius:50%;
  border:2px solid #2563eb;
  display:flex;
  align-items:center;
  justify-content:center;
  font-weight:800;
  cursor:pointer;
  background:#fff;
}
.primary-btn.active{
  background:#22c55e;
  border-color:#22c55e;
  color:#fff;
}
</style>
</head>

<body>

<!-- SIDE MENU -->
<div id="sideMenu" class="side-menu">
  <div class="menu-header">
    <b>Menu</b>
    <span onclick="toggleMenu()">âœ–</span>
  </div>

  <a href="index.html">ğŸ  Home</a>
  <a href="cart.html">ğŸ›’ Cart</a>
  <a href="my-orders.html">ğŸ“¦ My Orders</a>

  <hr>

  <a href="merchant-login.html">ğŸ§‘â€ğŸ’¼ Merchant Login</a>
  <a href="admin-login.html">ğŸ›¡ï¸ Admin Login</a>
</div>

<!-- HEADER -->
<header class="topbar">
  <div onclick="toggleMenu()">â˜°</div>
  <div>Manage Address</div>
  <div onclick="goHome()">ğŸ </div>
</header>

<div class="container">

  <!-- ADD ADDRESS -->
  <div class="card">
    <h3>Add / Update Address</h3>

    <input id="name" placeholder="Full Name">
    <input id="mobile" placeholder="Mobile Number">
    <textarea id="address" placeholder="House / Street / Area"></textarea>
    <input id="district" placeholder="District">
    <input id="state" placeholder="State">
    <input id="pincode" placeholder="Pin Code">

    <button onclick="saveAddress()">Save Address</button>
  </div>

  <!-- SAVED ADDRESSES -->
  <div id="addressList"></div>

</div>

<!-- JS -->
<script src="js/data.js"></script>

<script>
/* MENU */
function toggleMenu(){
  sideMenu.classList.toggle("active");
}
function goHome(){ location.href="index.html"; }

let addresses = getData("addresses");

/* SAVE ADDRESS */
function saveAddress(){

  const obj = {
    id: Date.now(),
    name: name.value.trim(),
    mobile: mobile.value.trim(),
    address: address.value.trim(),
    district: district.value.trim(),
    state: state.value.trim(),
    pincode: pincode.value.trim(),
    primary: addresses.length === 0
  };

  if(!obj.name || !obj.mobile || !obj.address){
    alert("Please fill name, mobile and address");
    return;
  }

  addresses.push(obj);
  setData("addresses", addresses);

  clearForm();
  renderAddresses();
}

/* SET PRIMARY */
function setPrimary(id){
  addresses.forEach(a=>a.primary=false);
  const found = addresses.find(a=>a.id===id);
  if(found) found.primary=true;
  setData("addresses", addresses);
  renderAddresses();
}

/* RENDER */
function renderAddresses(){

  addressList.innerHTML="";

  if(addresses.length===0){
    addressList.innerHTML="<p style='text-align:center'>No address saved</p>";
    return;
  }

  addresses.forEach(a=>{
    const d=document.createElement("div");
    d.className="address-card";
    d.innerHTML=`
      <div class="primary-btn ${a.primary?'active':''}"
           onclick="setPrimary(${a.id})">âœ“</div>

      <b>${a.name}</b><br>
      ${a.mobile}<br>
      ${a.address}<br>
      ${a.district}, ${a.state} - ${a.pincode}
    `;
    addressList.appendChild(d);
  });
}

/* CLEAR */
function clearForm(){
  name.value="";
  mobile.value="";
  address.value="";
  district.value="";
  state.value="";
  pincode.value="";
}

renderAddresses();
</script>

</body>
</html>
