<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ISI â€“ Cart</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="css/style.css">

<style>
.cart-footer{
  position:sticky;
  bottom:0;
  background:#fff;
  padding:12px;
  box-shadow:0 -4px 12px rgba(0,0,0,.1);
}
.qty-btn{
  padding:6px 10px;
  border-radius:8px;
  background:#e6edff;
  color:#2563eb;
  font-weight:800;
  cursor:pointer;
}
</style>
</head>

<body>

<!-- SIDE MENU -->
<div id="sideMenu" class="side-menu">
  <div class="menu-header">
    <b>Menu</b>
    <span onclick="toggleMenu()">âœ–</span>
  </div>

  <a href="index.html">ğŸ  Home</a>
  <a href="cart.html">ğŸ›’ Cart</a>
  <a href="my-orders.html">ğŸ“¦ My Orders</a>
  <a href="manage-address.html">ğŸ“ Manage Address</a>

  <hr>

  <a href="merchant-login.html">ğŸ§‘â€ğŸ’¼ Merchant Login</a>
  <a href="merchant-dashboard.html">ğŸ“Š Merchant Dashboard</a>

  <hr>

  <a href="admin-login.html">ğŸ›¡ï¸ Admin Login</a>
  <a href="admin.html">âš™ï¸ Admin Panel</a>
</div>

<!-- HEADER -->
<header class="topbar">
  <div onclick="toggleMenu()">â˜°</div>
  <div>My Cart</div>
  <div onclick="goHome()">ğŸ </div>
</header>

<div class="container">

  <div id="cartList"></div>

</div>

<div class="cart-footer">
  <div style="font-weight:800;font-size:18px;margin-bottom:8px">
    Total: â‚¹<span id="total">0</span>
  </div>
  <button onclick="goCheckout()">Proceed to Checkout</button>
</div>

<!-- JS -->
<script src="js/data.js"></script>
<script src="js/cart.js"></script>

<script>
/* SIDE MENU */
function toggleMenu(){
  document.getElementById("sideMenu").classList.toggle("active");
}

/* NAV */
function goHome(){ location.href="index.html"; }
function goCheckout(){ location.href="checkout.html"; }

/* RENDER CART */
function renderCart(){

  const cart = getData("cart");
  const box = document.getElementById("cartList");

  if(cart.length===0){
    box.innerHTML="<p style='text-align:center'>Your cart is empty</p>";
    document.getElementById("total").innerText=0;
    return;
  }

  let total=0;
  box.innerHTML="";

  cart.forEach(item=>{
    total += Number(item.price) * (item.qty||1);

    const div=document.createElement("div");
    div.className="card cart-item";

    div.innerHTML=`
      <img src="${item.img}">
      <div style="flex:1">
        <h4>${item.name}</h4>
        <div>â‚¹${item.price}</div>

        <div style="display:flex;align-items:center;gap:8px;margin:6px 0">
          <span class="qty-btn" onclick="changeCartQty(${item.id},-1)">âˆ’</span>
          <b>${item.qty||1}</b>
          <span class="qty-btn" onclick="changeCartQty(${item.id},1)">+</span>
        </div>

        <button class="secondary" onclick="removeCartItem(${item.id})">
          Remove
        </button>
      </div>
    `;

    box.appendChild(div);
  });

  document.getElementById("total").innerText=total;
}

/* INIT */
renderCart();
updateCartCount();
</script>

</body>
</html>
